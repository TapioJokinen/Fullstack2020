{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","res","data","nameObject","post","id","put","delete","console","log","Filter","props","value","filter","onChange","filterHandler","PersonForm","name","number","nameHandler","numberHandler","addNew","onClick","type","Person","people","deletePerson","map","person","i","key","ErrorNotification","message","className","SuccessNotification","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","errorMessage","setErrorMessage","successMessage","setSuccessMessage","getPersons","personService","useEffect","successfulAction","msg","setTimeout","failedAction","filteredPersons","toLowerCase","includes","e","target","preventDefault","k","id_","forEach","concat","txt","window","confirm","catch","error","find","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cc61d8d2.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(res => res.data)\n}\n\nconst create = (nameObject) => {\n    const request = axios.post(baseUrl, nameObject)\n    return request.then(res => res.data)\n}\n\nconst update = (id, nameObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, nameObject)\n    return request.then(res => res.data)\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(res => console.log(res))\n}\n\nexport default { getAll, create, update, deletePerson }","import React, { useState, useEffect } from 'react'\nimport personService from \"./services/persons\"\nimport \"./index.css\"\n\nconst Filter = (props) => {\n    return (\n        <div>\n            filter shown with: <input value={props.filter} onChange={props.filterHandler} />\n        </div>\n    )\n}\n\nconst PersonForm = (props) => {\n    const { name, number, nameHandler, numberHandler, addNew } = props\n    return (\n        <div>\n            <form>\n                <div>\n                    name: <input value={name} onChange={nameHandler} /><br></br>\n                    number: <input value={number} onChange={numberHandler} />\n                </div>\n                <div>\n                    <button onClick={addNew} type=\"submit\">add</button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nconst Person = ({ people, deletePerson }) => {\n\n    return (\n        <div>\n            {people.map((person, i) => {\n                return <li key={i}>\n                    {person.name} {person.number}\n                    <button onClick={() => deletePerson(person.id)}>delete</button>\n                </li>\n            })}\n        </div>\n    )\n}\n\nconst ErrorNotification = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n    return (\n        <div className=\"error\">\n            {message}\n        </div>\n    )\n}\n\nconst SuccessNotification = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n    return (\n        <div className=\"success\">\n            {message}\n        </div>\n    )\n}\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n    const [filter, setFilter] = useState('')\n    const [errorMessage, setErrorMessage] = useState(null)\n    const [successMessage, setSuccessMessage] = useState(null)\n    \n    const getPersons = () => {\n        personService\n            .getAll()\n            .then(data => {\n                setPersons(data.persons)\n            })\n    }\n\n    useEffect(getPersons, [])\n\n    const successfulAction = msg => {\n        setSuccessMessage(msg)\n        setTimeout(() => {\n            setSuccessMessage(null)\n        }, 2000);\n    }\n\n    const failedAction = msg => {\n        setErrorMessage(msg)\n        setTimeout(() => {\n            setErrorMessage(null)\n        }, 2000);\n    }\n\n\n    const deletePerson = (id) => {\n        const person = persons.find(person => person.id === id)\n        if (window.confirm(`Delete person ${person.name}`)) {\n            personService\n                .deletePerson(id)\n                .then(res => getPersons())\n                .then(res => {\n                    successfulAction(`${person.name} deleted successfully!`)\n                })\n                .catch(error => {\n                    failedAction(`Person ${person.name} is already removed from database.`)\n                    getPersons()\n                })\n        }\n    }\n\n\n    const addPerson = (e) => {\n        e.preventDefault()\n        let k = true\n        let id_ = 0\n        const nameObject = {\n            name: newName,\n            number: newNumber,\n            id: id_\n        }\n        persons.forEach(person => {\n            (person.name === nameObject.name) ? k = false : k = true\n            id_ += 1\n        });\n        if (k) {\n            setPersons(persons.concat(nameObject))\n            personService\n                .create(nameObject)\n                .then(res => getPersons())\n                .then(res => {\n                    successfulAction(`${nameObject.name} added successfully!`)\n                })\n        } else {\n            const txt = `${nameObject.name} was already added to phonebook. Would you like to replace it?`\n            if (window.confirm(txt)) {\n                personService\n                    .update(id_, nameObject)\n                    .then(res => getPersons())\n                    .then(res => {\n                        successfulAction(`${nameObject.name} updated successfully!`)\n                    })\n                    .catch(error => {\n                        failedAction(`Person ${nameObject.name} is already removed from database.`)\n                        getPersons()\n                    })\n            }\n        }\n    }\n\n    const onChangeHandlerName = (e) => {\n        setNewName(e.target.value)\n    }\n\n    const onChangeHandlerNumber = (e) => {\n        setNewNumber(e.target.value)\n    }\n\n    const onChangeHandlerFilter = (e) => {\n        setFilter(e.target.value)\n    }\n\n    const filteredPersons = filter === \"\"\n        ? persons\n        : persons.filter(person => person.name.toLowerCase().includes(filter))\n\n    return (\n        <div>\n            <ErrorNotification message={errorMessage} />\n            <SuccessNotification message={successMessage} />\n            <h2>Phonebook</h2>\n            <Filter value={filter} filterHandler={onChangeHandlerFilter} />\n            <h1>Add new</h1>\n            <PersonForm\n                name={newName}\n                number={newNumber}\n                nameHandler={onChangeHandlerName}\n                numberHandler={onChangeHandlerNumber}\n                addNew={addPerson} />\n            <h2>Numbers</h2>\n            <ul>\n                <Person people={filteredPersons} deletePerson={deletePerson} />\n            </ul>\n        </div>\n    )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from \"./App\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}